# Caddyfile for OpenClaw Multi-Tenant HTTPS
#
# Caddy automatically obtains and renews Let's Encrypt certificates!
#
# DNS Setup Required:
#   A record: {domain} -> your-server-ip
#   A record: *.{domain} -> your-server-ip (for user subdomains)
#
# Usage:
#   1. Set OPENCLAW_DOMAIN in .env.prod
#   2. Run: docker compose -f docker-compose.caddy.yml --env-file .env.prod up -d

# Management API - main domain
{$OPENCLAW_DOMAIN} {
	reverse_proxy management-api:{$LISTEN_PORT:47392}
}

# ============================================
# User Instances
# ============================================
# Add new users: {user_id}.{$OPENCLAW_DOMAIN} -> openclaw-{user_id}:18789

alice.{$OPENCLAW_DOMAIN} {
	reverse_proxy openclaw-alice:18789
}
